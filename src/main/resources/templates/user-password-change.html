<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/commons :: head"><title>The Spork</title></head>
<body>
<header th:replace="fragments/commons :: navigation"></header>
<main class="container">
    <div class="col-md-7 col-lg-8 profile-page">
        <h4 class="mb-3">Profile</h4>
        <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckDefault">
            <label class="form-check-label" for="flexSwitchCheckDefault">Click to edit fields.</label>
        </div>
        <form class="needs-validation" th:action="@{/users/user-password-change}"
              th:object="${userPasswordChangeBindingModel}" method="POST">
            <div class="row g-3">
                <div class="col-12">
                    <label for="password" class="form-label">Old Password</label>
                    <div class="input-group has-validation">
                        <input type="password" class="form-control" name="password" id="password" th:field="*{password}"
                               th:errorclass="bg-danger"
                               required
                               placeholder="Old Password">
                    </div>
                    <div th:if="${#fields.hasErrors('password')}" th:errors="*{password}">Your
                        password is required.
                    </div>
                </div>
                <div class="col-12">
                    <label for="newPassword" class="form-label">New Password</label>
                    <div class="input-group has-validation">
                        <input type="password" class="form-control" name="newPassword" id="newPassword"
                               th:field="*{newPassword}"
                               th:errorclass="bg-danger"
                               required
                               placeholder="New Password">
                    </div>
                    <div th:if="${#fields.hasErrors('newPassword')}" th:errors="*{newPassword}">Your
                        password is required.
                    </div>
                </div>
                <div class="col-12">
                    <label for="confirmNewPassword" class="form-label">Confirm New Password</label>
                    <div class="input-group has-validation">
                        <input type="password" class="form-control" name="confirmNewPassword" id="confirmNewPassword"
                               th:field="*{confirmNewPassword}"
                               th:errorclass="bg-danger"
                               required
                               placeholder="Confirm New Password">
                    </div>
                    <div th:if="${#fields.hasErrors('confirmNewPassword')}"
                         th:errors="*{confirmNewPassword}">Your password is required.
                    </div>
                </div>
                <button class="w-100 btn mb-1 btn-primary btn-lg buttonn" type="submit">Change Password</button>
                <hr class="my-3">
            </div>
        </form>
    </div>
</main>
<div th:replace="fragments/commons :: footer"></div>
<script>
    document.getElementById('flexSwitchCheckDefault').onchange = function () {
        document.getElementById("password").disabled = !this.checked;
        document.getElementById("newPassword").disabled = !this.checked;
        document.getElementById("confirmNewPassword").disabled = !this.checked;
    };
</script>
</body>
</html>